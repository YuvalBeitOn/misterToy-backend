(function(e){function t(t){for(var n,o,a=t[0],c=t[1],u=t[2],p=0,d=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"3c61":function(e,t,r){},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n,s,i=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"app-header flex space-between align-center mb30"},[r("div",{staticClass:"logo-container flex"},[r("h1",{on:{click:e.goHome}},[e._v("Mister Toy")]),e.user?r("span",[e._v("Hello "+e._s(e.user.username))]):e._e()]),r("main-nav",{attrs:{logout:e.logout}})],1),r("router-view",{staticClass:"mb50"}),e._m(0)],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",{staticClass:"app-footer"},[r("small",[e._v("Â© 2020 Yuval Beit On - All Rights Reserved")])])}],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"main-nav"},[r("button",{staticClass:"hamburger",on:{click:e.toggleNav}},[r("i",{staticClass:"fas fa-bars ham-icon"})]),r("div",{class:{"app-links":!0,showen:e.isShowen}},[e.user?r("span",{staticClass:"link",on:{click:e.logout}},[e._v("Log Out")]):r("router-link",{staticClass:"link",attrs:{to:"/login"}},[e._v("Login")]),r("router-link",{staticClass:"link",attrs:{to:"/"}},[e._v("Toys")]),r("router-link",{staticClass:"link",attrs:{to:"/reviews"}},[e._v("Reviews")]),e.user&&!e.user.isAdmin?r("span",{staticClass:"link",on:{click:e.goToUserProfile}},[e._v("Profile")]):e._e(),e.user&&e.user.isAdmin?r("router-link",{staticClass:"link",attrs:{to:"/admin"}},[e._v("Admin")]):e._e()],1)])},u=[],l={props:{logout:Function},data:function(){return{isNavOpen:!1}},computed:{user:function(){return this.$store.getters.loggedinUser},isShowen:function(){return!!this.isNavOpen}},methods:{goToUserProfile:function(){this.$router.push("/userdetails/".concat(this.user._id))},toggleNav:function(){this.isNavOpen=!this.isNavOpen,console.log(this.isNavOpen)}}},p=l,d=r("2877"),f=Object(d["a"])(p,c,u,!1,null,null,null),m=f.exports,g={methods:{goHome:function(){"/"!==this.$route.path&&this.$router.push("/")},logout:function(){this.$store.dispatch({type:"logout"})}},computed:{user:function(){return this.$store.getters.loggedinUser}},created:function(){this.$store.dispatch({type:"loadToys"})},components:{mainNav:m}},v=g,h=Object(d["a"])(v,o,a,!1,null,null,null),y=h.exports,b=r("8c4f"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"admin-page pages container"},[r("div",{staticClass:"users-list"},[r("el-button",{staticClass:"get-users-btn",on:{click:e.getAllUsers}},[e._v("Get All Users")]),e.users?r("ul",{staticClass:"clean list flex wrap"},e._l(e.users,(function(t){return r("li",{key:t._id,staticClass:"flex column"},[r("span",[e._v("User Id: "+e._s(t._id))]),r("span",[e._v("Username: "+e._s(t.username))]),r("span",[e._v("Email: "+e._s(t.email))]),t.isAdmin?e._e():r("el-button",{staticClass:"flex justify-center align-center",on:{click:function(r){return e.removeUser(t._id)}}},[e._v("x")])],1)})),0):e._e()],1),r("div",{staticClass:"chart-container"},[e.toys?r("chart",{attrs:{color:e.color,data:e.chartData,labels:e.chartLabels}}):e._e()],1),r("div",{staticClass:"map-container flex column align-center"},[r("div",{staticClass:"map-btns"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.centerMap(0)}}},[e._v("Tel Aviv")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.centerMap(1)}}},[e._v("Netanya")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.centerMap(2)}}},[e._v("Holon")])],1),r("div",{staticClass:"gMap-container"},[r("GmapMap",{staticStyle:{width:"595px",height:"495px"},attrs:{center:e.mapProps.center,zoom:e.mapProps.zoom,"map-type-id":"terrain"}},e._l(e.markers,(function(t,n){return r("GmapMarker",{key:n,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(r){e.center=t.position}}})})),1)],1)])])},j=[],_=(r("4160"),r("caad"),r("13d5"),r("b680"),r("159b"),r("1fca")),k={props:{data:Array,color:String,labels:Array},extends:_["a"],mounted:function(){this.renderChart({labels:this.labels,datasets:[{label:"Avg Price per toy Type",backgroundColor:this.color,data:this.data}]})},watch:{color:function(){this.renderChart({labels:this.labels,datasets:[{label:"Avg Price per toy Type",backgroundColor:this.color,data:this.data}]})}}},x=k,C=Object(d["a"])(x,n,s,!1,null,null,null),U=C.exports,R={components:{chart:U},data:function(){return{color:"rgba(131, 216, 231, 0.644)",markers:[{position:{lat:32.0853,lng:34.781769}},{position:{lat:32.329369,lng:34.856541}},{position:{lat:32.011261,lng:34.774811}}],mapProps:{center:{lat:32.171312,lng:34.812193},zoom:9}}},computed:{users:function(){return this.$store.getters.users},toys:function(){return this.$store.getters.toys},chartData:function(){var e=this.toys.reduce((function(e,t){return e[t.type]=e[t.type]?e[t.type]+1:1,e}),{}),t=this.toys.reduce((function(e,t){return e[t.type]=e[t.type]?e[t.type]+t.price:t.price,e}),{}),r=[];for(var n in t)r.push((t[n]/e[n]).toFixed(2));return r},chartLabels:function(){var e=[];return this.toys.forEach((function(t){e.includes(t.type)||e.push(t.type)})),e}},methods:{getAllUsers:function(){this.$store.dispatch({type:"loadUsers"})},removeUser:function(e){this.$store.dispatch({type:"removeUser",userId:e})},updateUser:function(){this.$store.dispatch({type:"updateUser",user:this.userToEdit})},centerMap:function(e){this.mapProps.zoom=13,this.mapProps.center=this.markers[e].position}}},O=R,$=Object(d["a"])(O,w,j,!1,null,null,null),S=$.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-app pages"},[r("div",{staticClass:"container actions flex space-between"},[r("toy-filter"),e.loggedInUser&&e.loggedInUser.isAdmin?r("el-button",{staticClass:"add-toy-btn",on:{click:e.addToy}},[e._v("Add Toy")]):e._e()],1),e.toys.length?r("toy-list",{attrs:{toys:e.toys},on:{deleteToy:e.deleteToy}}):r("div",{staticClass:"loading flex justify-center"},[r("img",{attrs:{src:"https://i.gifer.com/4V0b.gif",alt:""}})]),r("pop-up",{attrs:{isShowen:e.isPopUpShowen,closePopUp:e.togglePopUp}},[r("chat-app")],1),r("button",{staticClass:"chat-btn",on:{click:e.togglePopUp}},[r("i",{staticClass:"fas fa-comment-dots chat-icon"})])],1)},T=[],B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.toys?r("section",{staticClass:"toy-list container"},[r("ul",{staticClass:"clean list flex wrap align-center justify-center gap pages"},e._l(e.toys,(function(t){return r("toy-preview",{key:t._id,attrs:{toy:t},on:{deleteToy:e.emitDelete}})})),1)]):e._e()},E=[],I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"toy-preview flex column",on:{click:function(t){return t.stopPropagation(),e.toyDetails(e.toy._id)},mouseenter:function(t){e.isHovering=!0},mouseleave:function(t){e.isHovering=!1}}},[r("div",{staticClass:"img-container ratio-square"},[r("img",{attrs:{src:e.imgSrc,alt:""}})]),r("h4",[e._v(e._s(e.toy.name))]),r("h5",[e._v(e._s(e.toy.type))]),r("h3",[e._v(e._s(e.toy.price)+"$")]),e.toy.inStock?r("h4",{staticClass:"inStock"},[e._v("In stock")]):r("h4",{staticClass:"outOfStock"},[e._v("Out of stock")]),r("star-rating",{staticClass:"star-rating",attrs:{increment:.5,"max-rating":5,"inactive-color":"white","active-color":"gold","star-size":15,"border-width":1,"border-color":"#999"},on:{click:function(t){return t.stopPropagation(),e.setRating(t)}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}}),r("transition",{attrs:{name:"fade"}},[e.loggedInUser&&e.loggedInUser.isAdmin?r("span",{directives:[{name:"show",rawName:"v-show",value:e.isHovering,expression:"isHovering"}],staticClass:"toy-btns"},[r("button",{on:{click:function(t){return t.stopPropagation(),e.editToy(t)}}},[r("i",{staticClass:"fas fa-edit fa-icon"})]),r("button",{on:{click:function(t){return t.stopPropagation(),e.emitDelete(e.toy._id)}}},[r("i",{staticClass:"fas fa-trash-alt fa-icon"})])]):e._e()])],1)},A=[],z=r("5b3d"),L=r.n(z),M={name:"toy-preview",props:{toy:Object},data:function(){return{isHovering:!1,rating:0}},computed:{imgSrc:function(){return this.toy.imgUrl?this.toy.imgUrl:"https://www.carrefourbahrain.com/sites/default/files/7.jpg"},loggedInUser:function(){return this.$store.getters.loggedinUser}},methods:{emitDelete:function(e){this.$emit("deleteToy",e)},toyDetails:function(e){this.$router.push("/details/".concat(e))},editToy:function(){this.$router.push("/edit/".concat(this.toy._id))},setRating:function(e){this.rating=e},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}},components:{StarRating:L.a},created:function(){this.rating=this.getRandomIntInclusive(1,5)}},N=M,D=Object(d["a"])(N,I,A,!1,null,null,null),F=D.exports,q={name:"toy-list",props:{toys:Array},methods:{emitDelete:function(e){this.$emit("deleteToy",e)}},components:{toyPreview:F}},H=q,J=Object(d["a"])(H,B,E,!1,null,null,null),V=J.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"toy-filter flex end"},[r("el-select",{staticClass:"action",on:{change:e.setFilter},model:{value:e.filterBy.type,callback:function(t){e.$set(e.filterBy,"type",t)},expression:"filterBy.type"}},[r("el-option",{attrs:{value:"all",label:"All"}}),e._l(e.types,(function(e,t){return r("el-option",{key:t,attrs:{value:e,label:e}})}))],2),r("el-select",{staticClass:"action",on:{change:e.setFilter},model:{value:e.filterBy.sortBy,callback:function(t){e.$set(e.filterBy,"sortBy",t)},expression:"filterBy.sortBy"}},[r("el-option",{attrs:{value:"name"}},[e._v("Name")]),r("el-option",{attrs:{value:"price"}},[e._v("Price")])],1),r("el-checkbox",{staticClass:"action",attrs:{border:""},on:{change:e.setFilter},model:{value:e.filterBy.inStock,callback:function(t){e.$set(e.filterBy,"inStock",t)},expression:"filterBy.inStock"}},[e._v("In Stock?")])],1)},Y=[],W={data:function(){return{filterBy:{type:"all",inStock:!1,sortBy:"name"}}},computed:{types:function(){return this.$store.getters.types}},methods:{setFilter:function(){var e=JSON.parse(JSON.stringify(this.filterBy));"all"===e.type&&delete e.type,this.$store.dispatch({type:"setFilterBy",filterBy:e})}}},K=W,X=Object(d["a"])(K,G,Y,!1,null,null,null),Z=X.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isShowen?r("section",{staticClass:"pop-up",attrs:{tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closePopUp(t)}}},[r("div",{staticClass:"pop-up-container flex space-between column"},[r("button",{staticClass:"cls-btn",on:{click:e.closePopUp}},[e._v("X")]),e._t("default")],2)]):e._e()},ee=[],te={props:{isShowen:Boolean,closePopUp:Function}},re=te,ne=Object(d["a"])(re,Q,ee,!1,null,null,null),se=ne.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"chat-app"},[r("ul",{staticClass:"msgs clean-list"},e._l(e.msgs,(function(t,n){return r("li",{key:n,staticClass:"msg-preview"},[e._v(" "+e._s(t)+" ")])})),0),r("div",{staticClass:"chat-controls flex justify-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"chat-input",attrs:{type:"text"},domProps:{value:e.msg},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMsg(t)},input:function(t){t.target.composing||(e.msg=t.target.value)}}}),r("button",{on:{click:e.sendMsg}},[e._v("Send")])])])},oe=[],ae={data:function(){return{msgs:["Hello, how can we help you?"],msg:""}},methods:{sendMsg:function(){this.msgs.push(this.msg),this.msg="",this.msgs.push("One of our customer service representative will contact you soon...")}}},ce=ae,ue=Object(d["a"])(ce,ie,oe,!1,null,null,null),le=ue.exports,pe={name:"toy-app",methods:{deleteToy:function(e){this.$store.dispatch({type:"deleteToy",toyId:e})},addToy:function(){this.$router.push("/edit")},togglePopUp:function(){this.$store.dispatch({type:"togglePopUp"})}},computed:{toys:function(){return this.$store.getters.toys},isPopUpShowen:function(){return this.$store.getters.isPopUpShowen},loggedInUser:function(){return this.$store.getters.loggedinUser}},components:{toyList:V,toyFilter:Z,PopUp:se,ChatApp:le}},de=pe,fe=Object(d["a"])(de,P,T,!1,null,null,null),me=fe.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.toy?r("section",{staticClass:"toy-details flex space-around pages container"},[r("div",{staticClass:"details-container"},[r("div",{staticClass:"img-container ratio-square img-detail"},[r("img",{staticClass:"toy-img",attrs:{src:e.imgSrc,alt:""}})]),r("h2",[e._v(e._s(e.toy.name))]),r("h3",[e._v("Price: "+e._s(e.toy.price))]),r("h3",[e._v("Type: "+e._s(e.toy.type))]),e.toy.inStock?r("h3",{staticClass:"inStock"},[e._v("In stock")]):r("h3",{staticClass:"outOfStock"},[e._v("Out of stock")]),e.isAddReviewShowen?e._e():r("div",{staticClass:"comment"},[e._v(" Thanks for your review! ")]),e.user&&e.isAddReviewShowen?r("div",{staticClass:"add-review flex column"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.addReview(t)}}},[r("h3",[e._v("Add review")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review.content,expression:"review.content"}],attrs:{name:"content",cols:"20",rows:"4"},domProps:{value:e.review.content},on:{input:function(t){t.target.composing||e.$set(e.review,"content",t.target.value)}}}),r("star-rating",{staticClass:"star-rating",attrs:{increment:.5,"max-rating":5,"inactive-color":"white","active-color":"gold","star-size":20,"border-width":1,"border-color":"#999"},on:{click:e.setRating},model:{value:e.review.rating,callback:function(t){e.$set(e.review,"rating",t)},expression:"review.rating"}}),r("button",{attrs:{type:"submit"}},[e._v("Add")])],1)]):e._e()]),r("div",{staticClass:"reviews-container"},[r("h2",[e._v("Reviews")]),r("review-list",{attrs:{isUserShowen:!0,reviews:e.reviews,user:e.user}}),r("el-button",{attrs:{type:"button"},on:{click:e.goBack}},[e._v("Back")])],1)]):e._e()},ve=[],he=(r("b0c0"),r("96cf"),r("1da1")),ye=r("bc3a"),be=r.n(ye),we=(r("99af"),"/api/"),je=be.a.create({withCredentials:!0}),_e={get:function(e,t){return ke(e,"GET",t)},post:function(e,t){return ke(e,"POST",t)},put:function(e,t){return ke(e,"PUT",t)},delete:function(e,t){return ke(e,"DELETE",t)}};function ke(e){return xe.apply(this,arguments)}function xe(){return xe=Object(he["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"get",n=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,je({url:"".concat(we).concat(t),method:r,data:n});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e["catch"](2),401===e.t0.response.status&&qt.push("/"),console.log("Had issues ".concat(r,"ing to server"),e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),xe.apply(this,arguments)}var Ce={query:Ue,getById:$e,remove:Pe,save:Be,getEmpty:Le};function Ue(){return Re.apply(this,arguments)}function Re(){return Re=Object(he["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r="",t&&(r=Oe(t)),e.abrupt("return",_e.get("toy/".concat(r)));case 4:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}function Oe(e){var t="?";return e.sortBy&&(t+="_sort=".concat(e.sortBy,"&")),e.inStock&&(t+="inStock=".concat(e.inStock,"&")),e.type&&(t+="type=".concat(e.type)),t}function $e(e){return Se.apply(this,arguments)}function Se(){return Se=Object(he["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",_e.get("toy/".concat(t)));case 1:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}function Pe(e){return Te.apply(this,arguments)}function Te(){return Te=Object(he["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",_e.delete("toy/".concat(t)));case 1:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function Be(e){var t=e._id?Ae(e):Ee(e);return t}function Ee(e){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(he["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",_e.post("toy/",t));case 1:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Ae(e){return ze.apply(this,arguments)}function ze(){return ze=Object(he["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",_e.put("toy/".concat(t._id),t));case 1:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Le(){return{name:"",price:0,type:"",inStock:!1}}var Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.reviews?r("ul",{staticClass:"review-list"},e._l(e.reviews,(function(t){return r("review-preview",{key:t._id,attrs:{review:t,isUserShowen:e.isUserShowen,user:e.user}})})),1):e._e()},Ne=[],De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("section",{staticClass:"review-preview flex align-center"},[e.user.isAdmin||e.user?r("el-button",{staticClass:"review-btn",on:{click:function(t){return e.deleteReview()}}},[e._v("X")]):e._e(),e.review?r("li",{staticClass:"flex"},[r("star-rating",{staticClass:"star-rating",attrs:{"read-only":"",increment:.5,"max-rating":5,"inactive-color":"white","active-color":"gold","star-size":15,"border-width":1,"border-color":"#999"},model:{value:e.review.rating,callback:function(t){e.$set(e.review,"rating",t)},expression:"review.rating"}}),r("span",[e._v("Toy: "+e._s(e.review.aboutToy.name))]),e.isUserShowen?r("span",[e._v("By: "+e._s(e.review.byUser.username))]):e._e(),r("span",[e._v("Content: "+e._s(e.review.content))]),r("small",[e._v(e._s(e.dateForDisplay))])],1):e._e()],1):e._e()},Fe=[],qe={props:{review:Object,isUserShowen:Boolean,user:Object},methods:{deleteReview:function(){this.$store.dispatch({type:"removeReview",reviewId:this.review._id})}},computed:{dateForDisplay:function(){return moment(this.review.createdAt).format("MMM Do YY")}},components:{StarRating:L.a}},He=qe,Je=Object(d["a"])(He,De,Fe,!1,null,null,null),Ve=Je.exports,Ge={components:{reviewPreview:Ve},props:{reviews:Array,isUserShowen:Boolean,user:Object}},Ye=Ge,We=Object(d["a"])(Ye,Me,Ne,!1,null,null,null),Ke=We.exports,Xe={data:function(){return{review:null,toy:null,isAddReviewShowen:!0}},computed:{imgSrc:function(){return this.toy.imgUrl?this.toy.imgUrl:"https://www.carrefourbahrain.com/sites/default/files/7.jpg"},reviews:function(){return this.$store.getters.reviews},dateForDisplay:function(){return moment(this.review.createdAt).format("MMM Do YY")},user:function(){return this.$store.getters.loggedinUser}},methods:{goBack:function(){this.$router.push("/")},setRating:function(e){this.review.rating=e},addReview:function(){this.user&&(this.$store.dispatch({type:"addReview",review:this.review}),this.isAddReviewShowen=!1)},setReview:function(){this.review={aboutToy:{toyId:this.toy._id,name:this.toy.name},content:"",rating:null,createdAt:Date.now()}}},created:function(){var e=this;return Object(he["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.params.id,t.next=3,Ce.getById(r);case 3:n=t.sent,e.toy=n,e.setReview(),e.$store.dispatch({type:"loadReviews",filterBy:{toyId:e.toy._id}});case 7:case"end":return t.stop()}}),t)})))()},components:{StarRating:L.a,reviewList:Ke}},Ze=Xe,Qe=Object(d["a"])(Ze,ge,ve,!1,null,null,null),et=Qe.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("section",{staticClass:"user-details container pages"},[r("h2",[e._v("My reviews")]),r("review-list",{attrs:{isUserShowen:!1,reviews:e.reviews,user:e.user}})],1):e._e()},rt=[],nt={login:ct,logout:dt,signup:lt,getUsers:st,getById:it,remove:ot,update:at};function st(){return _e.get("user")}function it(e){return _e.get("user/".concat(e))}function ot(e){return _e.delete("user/".concat(e))}function at(e){return _e.put("user/".concat(e._id),e)}function ct(e){return ut.apply(this,arguments)}function ut(){return ut=Object(he["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e.post("auth/login",t);case 2:return r=e.sent,console.log("user:",r),e.abrupt("return",mt(r));case 5:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}function lt(e){return pt.apply(this,arguments)}function pt(){return pt=Object(he["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("userCred:",t),e.next=3,_e.post("auth/signup",t);case 3:return r=e.sent,console.log("user:",r),e.abrupt("return",mt(r));case 6:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}function dt(){return ft.apply(this,arguments)}function ft(){return ft=Object(he["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e.post("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)}))),ft.apply(this,arguments)}function mt(e){return console.log("user in _handleLogin:",e),sessionStorage.setItem("user",JSON.stringify(e)),e}var gt={data:function(){return{user:null}},computed:{reviews:function(){return this.$store.getters.reviews}},created:function(){var e=this;return Object(he["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.params.id,t.next=3,nt.getById(r);case 3:n=t.sent,e.user=n,console.log("this.user:",e.user),e.$store.dispatch({type:"loadReviews",filterBy:{byUser:e.user._id}});case 7:case"end":return t.stop()}}),t)})))()},components:{reviewList:Ke}},vt=gt,ht=Object(d["a"])(vt,tt,rt,!1,null,null,null),yt=ht.exports,bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.toy?r("section",{staticClass:"toy-edit pages"},[r("form",{staticClass:"flex column justify-center align-center"},[r("h2",{staticClass:"edit-title"},[e._v(e._s(e.title))]),e.toy.imgUrl?r("img",{staticClass:"toy-img",attrs:{src:e.toy.imgUrl,alt:""}}):e._e(),e.isLoading?r("img",{staticClass:"loader",attrs:{src:"https://i.gifer.com/4V0b.gif",alt:""}}):[e._m(0),r("input",{staticClass:"upload-input",attrs:{type:"file",name:"img-uploader",id:"imgUploader"},on:{change:e.onUploadImg}})],r("h3",[e._v("Name")]),r("ValidationProvider",{attrs:{name:"toy.name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return r("div",{staticClass:"flex column align-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.toy.name,expression:"toy.name"}],domProps:{value:e.toy.name},on:{input:function(t){t.target.composing||e.$set(e.toy,"name",t.target.value)}}}),r("p",{staticClass:"error-msg"},[e._v(e._s(n[0]))])])}}],null,!1,2298726268)}),r("h3",[e._v("Type")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.toy.type,expression:"toy.type"}],staticClass:"action",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.toy,"type",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"Funny"}},[e._v("Funny")]),r("option",{attrs:{value:"Adult"}},[e._v("Adult")]),r("option",{attrs:{value:"Educational"}},[e._v("Educational")])]),r("h3",[e._v("Price")]),r("ValidationProvider",{attrs:{name:"toy.price",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return r("div",{staticClass:"flex column align-center"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.toy.price,expression:"toy.price",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.toy.price},on:{input:function(t){t.target.composing||e.$set(e.toy,"price",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),r("p",{staticClass:"error-msg"},[e._v(e._s(n[0]))])])}}],null,!1,2595732986)}),r("label",{staticClass:"checkbox action"},[e._v("In stock? "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.toy.inStock,expression:"toy.inStock"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.toy.inStock)?e._i(e.toy.inStock,null)>-1:e.toy.inStock},on:{change:function(t){var r=e.toy.inStock,n=t.target,s=!!n.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);n.checked?o<0&&e.$set(e.toy,"inStock",r.concat([i])):o>-1&&e.$set(e.toy,"inStock",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.toy,"inStock",s)}}})]),r("div",{staticClass:"edit-btns"},[r("el-button",{attrs:{type:"button"},on:{click:e.goBack}},[e._v("Back")]),r("el-button",{on:{click:function(t){return t.preventDefault(),e.saveToy(t)}}},[e._v("Save")])],1)],2)]):e._e()},wt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"imgUploader"}},[r("img",{staticClass:"upload-img",attrs:{src:"https://lh3.googleusercontent.com/proxy/ybV5upOkFlWYVsEN_aWw4UmnHgjOlEG9kzWbDfedBxVYU_jO6UK1bNgdzCGO1FRTT0oCoDPbtweZrB-Qc-dIopuMGygTvvhWdoJznm-RN6g9O_wF-5EuVg4Rr1o",alt:""}})])}],jt=r("5530"),_t=function(){var e=Object(he["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="casep_pre",n="yuvalbeiton",s="https://api.cloudinary.com/v1_1/".concat(n,"/image/upload"),i=new FormData,i.append("file",t.target.files[0]),i.append("upload_preset",r),e.prev=6,e.next=9,be.a.post(s,i);case 9:return o=e.sent,e.abrupt("return",o.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),kt=r("7bb1"),xt=r("4c93");Object(kt["b"])("required",Object(jt["a"])(Object(jt["a"])({},xt["a"]),{},{message:"This field is required"}));var Ct={data:function(){return{isEditing:!1,toy:null,isLoading:!1}},computed:{title:function(){return this.isEditing?"Edit toy ".concat(this.toy._id):"Add a toy"}},methods:{goBack:function(){this.$router.push("/")},saveToy:function(){if(this.isEditing||this.toy.name&&this.toy.type&&this.toy.price){var e=this.isEditing?"editToy":"addToy";this.$store.dispatch({type:e,toy:this.toy}),this.goBack()}else alert("All field are required")},onUploadImg:function(e){var t=this;return Object(he["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.next=3,_t(e);case 3:n=r.sent,t.toy.imgUrl=n.url,t.isLoading=!1;case 6:case"end":return r.stop()}}),r)})))()}},created:function(){var e=this;if(this.$route.params.id){var t=this.$route.params.id;Ce.getById(t).then((function(t){e.isEditing=!0,e.toy=t}))}else this.toy=Ce.getEmpty(),this.isEditing=!1},components:{ValidationProvider:kt["a"]}},Ut=Ct,Rt=(r("fdd7"),Object(d["a"])(Ut,bt,wt,!1,null,null,null)),Ot=Rt.exports,$t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login pages"},[r("div",{staticClass:"login-subtitle"},[e._v(e._s(e.subtitle)+" "),r("span",{staticClass:"btn-content",on:{click:function(t){return t.preventDefault(),e.toggleIsLogin(t)}}},[e._v(e._s(e.subtitleBtn))])]),e.isLogin?r("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin(t)}}},[r("el-input",{attrs:{type:"text",placeholder:"Email"},model:{value:e.loginCred.email,callback:function(t){e.$set(e.loginCred,"email",t)},expression:"loginCred.email"}}),r("br"),r("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.loginCred.password,callback:function(t){e.$set(e.loginCred,"password",t)},expression:"loginCred.password"}}),r("br"),r("el-button",{on:{click:e.doLogin}},[e._v("Login")])],1):r("form",{on:{submit:function(t){return t.preventDefault(),e.doSignup(t)}}},[r("el-input",{attrs:{type:"text",placeholder:"Email"},model:{value:e.signupCred.email,callback:function(t){e.$set(e.signupCred,"email",t)},expression:"signupCred.email"}}),r("br"),r("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.signupCred.password,callback:function(t){e.$set(e.signupCred,"password",t)},expression:"signupCred.password"}}),r("br"),r("el-input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.signupCred.username,callback:function(t){e.$set(e.signupCred,"username",t)},expression:"signupCred.username"}}),r("br"),r("el-button",{on:{click:e.doSignup}},[e._v("Signup")])],1)])},St=[],Pt={name:"test",data:function(){return{isLogin:!0,loginCred:{},signupCred:{},msg:"",userToEdit:{}}},computed:{subtitle:function(){return this.isLogin?"Don't have a user yet?":"Already have a user?"},subtitleBtn:function(){return this.isLogin?"Signup":"Login"},users:function(){return this.$store.getters.users},loggedinUser:function(){return this.$store.getters.loggedinUser}},created:function(){console.log("this.loggedinUser",this.loggedinUser)},methods:{toggleIsLogin:function(){this.isLogin=!this.isLogin},doLogin:function(){var e=this;return Object(he["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.loginCred,console.log("cred:",r),r.email&&r.password){t.next=4;break}return t.abrupt("return",e.msg="Please enter user/password");case 4:return t.next=6,e.$store.dispatch({type:"login",userCred:r});case 6:e.isLogin=!1,e.loginCred={},e.$router.push("/");case 9:case"end":return t.stop()}}),t)})))()},doLogout:function(){this.$store.dispatch({type:"logout"})},doSignup:function(){var e=this.signupCred;if(!e.email||!e.password||!e.username)return this.msg="Please fill up the form";this.$store.dispatch({type:"signup",userCred:e}),this.$router.push("/")}},watch:{loggedinUser:function(){this.userToEdit=Object(jt["a"])({},this.loggedinUser)}}},Tt=Pt,Bt=Object(d["a"])(Tt,$t,St,!1,null,null,null),Et=Bt.exports,It=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"reviews-page pages container"},[r("h2",[e._v("All reviews")]),r("review-list",{attrs:{user:e.user,isUserShowen:!0,reviews:e.reviews}})],1)},At=[],zt={computed:{reviews:function(){return this.$store.getters.reviews},user:function(){return this.$store.getters.loggedinUser}},created:function(){this.$store.dispatch({type:"loadReviews"})},components:{reviewList:Ke}},Lt=zt,Mt=Object(d["a"])(Lt,It,At,!1,null,null,null),Nt=Mt.exports;i["default"].use(b["a"]);var Dt=[{path:"/",name:"toyApp",component:me},{path:"/login",name:"login",component:Et},{path:"/reviews",name:"reviews",component:Nt},{path:"/admin",name:"Admin",component:S},{path:"/details/:id",component:et},{path:"/userdetails/:id",component:yt},{path:"/edit/:id?",component:Ot}],Ft=new b["a"]({mode:"hash",base:"/",routes:Dt}),qt=Ft,Ht=r("2f62"),Jt=(r("c740"),r("a434"),{strict:!0,state:{toys:[],filterBy:null,types:["Adult","Funny","Educational"]},getters:{toys:function(e){return e.toys},types:function(e){return e.types},filterBy:function(e){return e.filterBy}},mutations:{setToys:function(e,t){var r=t.toys;e.toys=r},deleteToy:function(e,t){var r=t.toyId,n=e.toys.findIndex((function(e){return e._id===r}));e.toys.splice(n,1)},setTypes:function(e,t){var r=t.types;e.types=r},setFilterBy:function(e,t){var r=t.filterBy;e.filterBy=r},addToy:function(e,t){var r=t.toy;e.toys.unshift(r)},editToy:function(e,t){var r=t.toy,n=e.toys.findIndex((function(e){return r._id===e._id}));e.toys.splice(n,1,r)}},actions:{setFilterBy:function(e,t){var r=t.filterBy;e.commit({type:"setFilterBy",filterBy:r}),e.dispatch("loadToys")},loadToys:function(e){return Object(he["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.getters,n=e.commit,t.next=3,Ce.query(r.filterBy);case 3:return s=t.sent,n({type:"setToys",toys:s}),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},deleteToy:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.toyId,r.next=4,Ce.remove(s);case 4:return i=r.sent,n({type:"deleteToy",toyId:s}),r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})))()},editToy:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.toy,console.log("toy from edit store:",s),r.next=5,Ce.save(s);case 5:return i=r.sent,n({type:"editToy",toy:i}),r.abrupt("return",i);case 8:case"end":return r.stop()}}),r)})))()},addToy:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.toy,r.next=4,Ce.save(s);case 4:return i=r.sent,n({type:"addToy",toy:i}),r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})))()}}}),Vt=(r("4de4"),null);sessionStorage.user&&(Vt=JSON.parse(sessionStorage.user));var Gt={state:{loggedinUser:Vt,users:[]},getters:{users:function(e){return e.users},loggedinUser:function(e){return e.loggedinUser}},mutations:{setUser:function(e,t){var r=t.user;e.loggedinUser=r,console.log("loggedinuser:",e.loggedinUser)},setUsers:function(e,t){var r=t.users;e.users=r},removeUser:function(e,t){var r=t.userId;e.users=e.users.filter((function(e){return e._id!==r}))}},actions:{login:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.userCred,console.log("userCred from store:",n),r.next=4,nt.login(n);case 4:return s=r.sent,e.commit({type:"setUser",user:s}),r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})))()},signup:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.userCred,console.log("here"),r.next=4,nt.signup(n);case 4:return s=r.sent,e.commit({type:"setUser",user:s}),r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})))()},logout:function(e){return Object(he["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.logout();case 2:e.commit({type:"setUsers",users:[]}),e.commit({type:"setUser",user:null});case 4:case"end":return t.stop()}}),t)})))()},loadUsers:function(e){return Object(he["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.getUsers();case 2:r=t.sent,e.commit({type:"setUsers",users:r});case 4:case"end":return t.stop()}}),t)})))()},removeUser:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.userId,r.next=3,nt.remove(n);case 3:e.commit({type:"removeUser",userId:n});case 4:case"end":return r.stop()}}),r)})))()},updateUser:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.user,r.next=3,nt.update(n);case 3:n=r.sent,e.commit({type:"setUser",user:n});case 5:case"end":return r.stop()}}),r)})))()}}},Yt={add:Xt,query:Wt,remove:Kt};function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";return e.toyId&&(t="?toyId=".concat(e.toyId)),e.byUser&&(t="?byUser=".concat(e.byUser)),console.log("path:","review/".concat(t)),_e.get("review/".concat(t))}function Kt(e){return _e.delete("review/".concat(e))}function Xt(e){return _e.post("review",e)}var Zt={state:{reviews:[]},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var r=t.reviews;e.reviews=r},addReview:function(e,t){var r=t.review;e.reviews.push(r)},removeReview:function(e,t){var r=t.reviewId;e.reviews=e.reviews.filter((function(e){return e._id!==r}))}},actions:{addReview:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.review,r.next=3,Yt.add(n);case 3:return n=r.sent,e.commit({type:"addReview",review:n}),r.abrupt("return",n);case 6:case"end":return r.stop()}}),r)})))()},loadReviews:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.filterBy,console.log("filterBy in store:",n),r.next=4,Yt.query(n);case 4:s=r.sent,e.commit({type:"setReviews",reviews:s});case 6:case"end":return r.stop()}}),r)})))()},removeReview:function(e,t){return Object(he["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.reviewId,console.log("reviewId from store:",n),r.next=4,Yt.remove(n);case 4:e.commit({type:"removeReview",reviewId:n});case 5:case"end":return r.stop()}}),r)})))()}}};i["default"].use(Ht["a"]);var Qt=new Ht["a"].Store({strict:!0,state:{isPopUpShowen:!1},getters:{isPopUpShowen:function(e){return e.isPopUpShowen}},mutations:{togglePopUp:function(e){e.isPopUpShowen=!e.isPopUpShowen}},actions:{togglePopUp:function(e){var t=e.commit;t({type:"togglePopUp"})}},modules:{toyStore:Jt,userStore:Gt,reviewStore:Zt}}),er=r("5c96"),tr=r.n(er),rr=(r("0fae"),r("755e"));r("3c61");i["default"].use(tr.a),i["default"].use(rr,{load:{key:"AIzaSyCmhCBEHJkdIG3m11Ua7ZsKbz3u9nMJBuI",libraries:"places"}}),i["default"].config.productionTip=!1,new i["default"]({router:qt,store:Qt,render:function(e){return e(y)}}).$mount("#app")},"6a66":function(e,t,r){},fdd7:function(e,t,r){"use strict";r("6a66")}});
//# sourceMappingURL=app.049c3a35.js.map