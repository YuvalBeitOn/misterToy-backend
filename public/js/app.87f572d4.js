(function(e){function t(t){for(var r,o,a=t[0],c=t[1],u=t[2],p=0,d=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"3c61":function(e,t,n){},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,s,i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"app-header flex space-between align-center mb30"},[n("div",{staticClass:"logo-container flex"},[n("h1",{on:{click:e.goHome}},[e._v("Mister Toy")]),e.user?n("span",[e._v("Hello "+e._s(e.user.username))]):e._e()]),n("main-nav",{attrs:{logout:e.logout}})],1),n("router-view",{staticClass:"mb50"}),e._m(0)],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"app-footer"},[n("small",[e._v("Â© 2020 Yuval Beit On - All Rights Reserved")])])}],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"main-nav"},[n("button",{staticClass:"hamburger",on:{click:e.toggleNav}},[n("i",{staticClass:"fas fa-bars ham-icon"})]),n("div",{class:{"app-links":!0,showen:e.isShowen}},[e.user?n("span",{staticClass:"link",on:{click:e.logout}},[e._v("Log Out")]):n("router-link",{staticClass:"link",attrs:{to:"/login"}},[e._v("Login")]),n("router-link",{staticClass:"link",attrs:{to:"/"}},[e._v("Toys")]),n("router-link",{staticClass:"link",attrs:{to:"/reviews"}},[e._v("Reviews")]),e.user&&!e.user.isAdmin?n("span",{staticClass:"link",on:{click:e.goToUserProfile}},[e._v("Profile")]):e._e(),e.user&&e.user.isAdmin?n("router-link",{staticClass:"link",attrs:{to:"/admin"}},[e._v("Admin")]):e._e()],1)])},u=[],l={props:{logout:Function},data:function(){return{isNavOpen:!1}},computed:{user:function(){return this.$store.getters.loggedinUser},isShowen:function(){return!!this.isNavOpen}},methods:{goToUserProfile:function(){this.$router.push("/userdetails/".concat(this.user._id))},toggleNav:function(){this.isNavOpen=!this.isNavOpen,console.log(this.isNavOpen)}}},p=l,d=n("2877"),f=Object(d["a"])(p,c,u,!1,null,null,null),m=f.exports,g={methods:{goHome:function(){"/"!==this.$route.path&&this.$router.push("/")},logout:function(){this.$store.dispatch({type:"logout"}),this.$router.push("/login")}},computed:{user:function(){return this.$store.getters.loggedinUser}},created:function(){this.$store.dispatch({type:"loadToys"})},components:{mainNav:m}},v=g,h=Object(d["a"])(v,o,a,!1,null,null,null),y=h.exports,b=n("8c4f"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"admin-page pages container"},[n("div",{staticClass:"users-list"},[n("el-button",{staticClass:"get-users-btn",on:{click:e.getAllUsers}},[e._v("Get All Users")]),e.users?n("ul",{staticClass:"clean list flex wrap"},e._l(e.users,(function(t){return n("li",{key:t._id,staticClass:"flex column"},[n("span",[e._v("User Id: "+e._s(t._id))]),n("span",[e._v("Username: "+e._s(t.username))]),n("span",[e._v("Email: "+e._s(t.email))]),t.isAdmin?e._e():n("el-button",{staticClass:"flex justify-center align-center",on:{click:function(n){return e.removeUser(t._id)}}},[e._v("x")])],1)})),0):e._e()],1),n("div",{staticClass:"chart-container"},[e.toys?n("chart",{attrs:{color:e.color,data:e.chartData,labels:e.chartLabels}}):e._e()],1),n("div",{staticClass:"map-container flex column align-center"},[n("div",{staticClass:"map-btns"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.centerMap(0)}}},[e._v("Tel Aviv")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.centerMap(1)}}},[e._v("Netanya")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.centerMap(2)}}},[e._v("Holon")])],1),n("div",{staticClass:"gMap-container"},[n("GmapMap",{staticStyle:{width:"595px",height:"495px"},attrs:{center:e.mapProps.center,zoom:e.mapProps.zoom,"map-type-id":"terrain"}},e._l(e.markers,(function(t,r){return n("GmapMarker",{key:r,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(n){e.center=t.position}}})})),1)],1)])])},j=[],_=(n("4160"),n("caad"),n("13d5"),n("b680"),n("159b"),n("1fca")),k={props:{data:Array,color:String,labels:Array},extends:_["a"],mounted:function(){this.renderChart({labels:this.labels,datasets:[{label:"Avg Price per toy Type",backgroundColor:this.color,data:this.data}]})},watch:{color:function(){this.renderChart({labels:this.labels,datasets:[{label:"Avg Price per toy Type",backgroundColor:this.color,data:this.data}]})}}},x=k,C=Object(d["a"])(x,r,s,!1,null,null,null),U=C.exports,R={components:{chart:U},data:function(){return{color:"rgba(131, 216, 231, 0.644)",markers:[{position:{lat:32.0853,lng:34.781769}},{position:{lat:32.329369,lng:34.856541}},{position:{lat:32.011261,lng:34.774811}}],mapProps:{center:{lat:32.171312,lng:34.812193},zoom:9}}},computed:{users:function(){return this.$store.getters.users},toys:function(){return this.$store.getters.toys},chartData:function(){var e=this.toys.reduce((function(e,t){return e[t.type]=e[t.type]?e[t.type]+1:1,e}),{}),t=this.toys.reduce((function(e,t){return e[t.type]=e[t.type]?e[t.type]+t.price:t.price,e}),{}),n=[];for(var r in t)n.push((t[r]/e[r]).toFixed(2));return n},chartLabels:function(){var e=[];return this.toys.forEach((function(t){e.includes(t.type)||e.push(t.type)})),e}},methods:{getAllUsers:function(){this.$store.dispatch({type:"loadUsers"})},removeUser:function(e){this.$store.dispatch({type:"removeUser",userId:e})},updateUser:function(){this.$store.dispatch({type:"updateUser",user:this.userToEdit})},centerMap:function(e){this.mapProps.zoom=13,this.mapProps.center=this.markers[e].position}}},S=R,$=Object(d["a"])(S,w,j,!1,null,null,null),O=$.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"toy-app pages"},[n("div",{staticClass:"container actions flex space-between"},[n("toy-filter"),e.loggedInUser&&e.loggedInUser.isAdmin?n("el-button",{staticClass:"add-toy-btn",on:{click:e.addToy}},[e._v("Add Toy")]):e._e()],1),e.toys.length?n("toy-list",{attrs:{toys:e.toys},on:{deleteToy:e.deleteToy}}):n("div",{staticClass:"loading flex justify-center"},[n("img",{attrs:{src:"https://i.gifer.com/4V0b.gif",alt:""}})])],1)},P=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toys?n("section",{staticClass:"toy-list container"},[n("ul",{staticClass:"clean list flex wrap align-center justify-center gap pages"},e._l(e.toys,(function(t){return n("toy-preview",{key:t._id,attrs:{toy:t},on:{deleteToy:e.emitDelete}})})),1)]):e._e()},E=[],I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"toy-preview flex column",on:{click:function(t){return t.stopPropagation(),e.toyDetails(e.toy._id)},mouseenter:function(t){e.isHovering=!0},mouseleave:function(t){e.isHovering=!1}}},[n("div",{staticClass:"img-container ratio-square"},[n("img",{attrs:{src:e.imgSrc,alt:""}})]),n("h4",[e._v(e._s(e.toy.name))]),n("h5",[e._v(e._s(e.toy.type))]),n("h3",[e._v(e._s(e.toy.price)+"$")]),e.toy.inStock?n("h4",{staticClass:"inStock"},[e._v("In stock")]):n("h4",{staticClass:"outOfStock"},[e._v("Out of stock")]),n("star-rating",{staticClass:"star-rating",attrs:{increment:.5,"max-rating":5,"inactive-color":"white","active-color":"gold","star-size":15,"border-width":1,"border-color":"#999"},on:{click:function(t){return t.stopPropagation(),e.setRating(t)}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}}),n("transition",{attrs:{name:"fade"}},[e.loggedInUser&&e.loggedInUser.isAdmin?n("span",{directives:[{name:"show",rawName:"v-show",value:e.isHovering,expression:"isHovering"}],staticClass:"toy-btns"},[n("button",{on:{click:function(t){return t.stopPropagation(),e.editToy(t)}}},[n("i",{staticClass:"fas fa-edit fa-icon"})]),n("button",{on:{click:function(t){return t.stopPropagation(),e.emitDelete(e.toy._id)}}},[n("i",{staticClass:"fas fa-trash-alt fa-icon"})])]):e._e()])],1)},A=[],z=n("5b3d"),M=n.n(z),L={name:"toy-preview",props:{toy:Object},data:function(){return{isHovering:!1,rating:0}},computed:{imgSrc:function(){return this.toy.imgUrl?this.toy.imgUrl:"https://www.carrefourbahrain.com/sites/default/files/7.jpg"},loggedInUser:function(){return this.$store.getters.loggedinUser}},methods:{emitDelete:function(e){this.$emit("deleteToy",e)},toyDetails:function(e){this.$router.push("/details/".concat(e))},editToy:function(){this.$router.push("/edit/".concat(this.toy._id))},setRating:function(e){this.rating=e},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}},components:{StarRating:M.a},created:function(){this.rating=this.getRandomIntInclusive(1,5)}},N=L,D=Object(d["a"])(N,I,A,!1,null,null,null),F=D.exports,H={name:"toy-list",props:{toys:Array},methods:{emitDelete:function(e){this.$emit("deleteToy",e)}},components:{toyPreview:F}},q=H,J=Object(d["a"])(q,B,E,!1,null,null,null),V=J.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"toy-filter flex end"},[n("el-select",{staticClass:"action",on:{change:e.setFilter},model:{value:e.filterBy.type,callback:function(t){e.$set(e.filterBy,"type",t)},expression:"filterBy.type"}},[n("el-option",{attrs:{value:"all",label:"All"}}),e._l(e.types,(function(e,t){return n("el-option",{key:t,attrs:{value:e,label:e}})}))],2),n("el-select",{staticClass:"action",on:{change:e.setFilter},model:{value:e.filterBy.sortBy,callback:function(t){e.$set(e.filterBy,"sortBy",t)},expression:"filterBy.sortBy"}},[n("el-option",{attrs:{value:"name"}},[e._v("Name")]),n("el-option",{attrs:{value:"price"}},[e._v("Price")])],1),n("el-checkbox",{staticClass:"action",attrs:{border:""},on:{change:e.setFilter},model:{value:e.filterBy.inStock,callback:function(t){e.$set(e.filterBy,"inStock",t)},expression:"filterBy.inStock"}},[e._v("In Stock?")])],1)},Y=[],W={data:function(){return{filterBy:{type:"all",inStock:!1,sortBy:"name"}}},computed:{types:function(){return this.$store.getters.types}},methods:{setFilter:function(){var e=JSON.parse(JSON.stringify(this.filterBy));"all"===e.type&&delete e.type,this.$store.dispatch({type:"setFilterBy",filterBy:e})}}},K=W,X=Object(d["a"])(K,G,Y,!1,null,null,null),Z=X.exports,Q={name:"toy-app",methods:{deleteToy:function(e){this.$store.dispatch({type:"deleteToy",toyId:e})},addToy:function(){this.$router.push("/edit")}},computed:{toys:function(){return this.$store.getters.toys},isPopUpShowen:function(){return this.$store.getters.isPopUpShowen},loggedInUser:function(){return this.$store.getters.loggedinUser}},components:{toyList:V,toyFilter:Z}},ee=Q,te=Object(d["a"])(ee,T,P,!1,null,null,null),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toy?n("section",{staticClass:"toy-details flex space-around pages container"},[n("div",{staticClass:"details-container"},[n("div",{staticClass:"img-container ratio-square img-detail"},[n("img",{staticClass:"toy-img",attrs:{src:e.imgSrc,alt:""}})]),n("h2",[e._v(e._s(e.toy.name))]),n("h3",[e._v("Price: "+e._s(e.toy.price))]),n("h3",[e._v("Type: "+e._s(e.toy.type))]),e.toy.inStock?n("h3",{staticClass:"inStock"},[e._v("In stock")]):n("h3",{staticClass:"outOfStock"},[e._v("Out of stock")]),e.isAddReviewShowen?e._e():n("div",{staticClass:"comment"},[e._v(" Thanks for your review! ")]),e.user&&e.isAddReviewShowen?n("div",{staticClass:"add-review flex column"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.addReview(t)}}},[n("h3",[e._v("Add review")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review.content,expression:"review.content"}],attrs:{name:"content",cols:"20",rows:"4"},domProps:{value:e.review.content},on:{input:function(t){t.target.composing||e.$set(e.review,"content",t.target.value)}}}),n("star-rating",{staticClass:"star-rating",attrs:{increment:.5,"max-rating":5,"inactive-color":"white","active-color":"gold","star-size":20,"border-width":1,"border-color":"#999"},on:{click:e.setRating},model:{value:e.review.rating,callback:function(t){e.$set(e.review,"rating",t)},expression:"review.rating"}}),n("button",{attrs:{type:"submit"}},[e._v("Add")])],1)]):e._e()]),n("div",{staticClass:"reviews-container"},[n("h2",[e._v("Reviews")]),e.user?n("review-list",{attrs:{isUserShowen:!0,reviews:e.reviews,user:e.user}}):e._e(),n("el-button",{attrs:{type:"button"},on:{click:e.goBack}},[e._v("Back")])],1),n("div",{staticClass:"chat-section"},[n("button",{staticClass:"chat-btn",on:{click:e.togglePopUp}},[n("i",{staticClass:"fas fa-comment-dots chat-icon"})]),n("pop-up",{attrs:{isShowen:e.isPopUpShowen,closePopUp:e.togglePopUp}},[e.user?n("chat-app",{attrs:{user:e.user.username,topic:e.toy._id,toyName:e.toy.name}}):e._e()],1)],1)]):e._e()},se=[],ie=(n("b0c0"),n("96cf"),n("1da1")),oe=n("bc3a"),ae=n.n(oe),ce=(n("99af"),"/api/"),ue=ae.a.create({withCredentials:!0}),le={get:function(e,t){return pe(e,"GET",t)},post:function(e,t){return pe(e,"POST",t)},put:function(e,t){return pe(e,"PUT",t)},delete:function(e,t){return pe(e,"DELETE",t)}};function pe(e){return de.apply(this,arguments)}function de(){return de=Object(ie["a"])(regeneratorRuntime.mark((function e(t){var n,r,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"get",r=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,ue({url:"".concat(ce).concat(t),method:n,data:r});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e["catch"](2),401===e.t0.response.status&&Qt.push("/"),console.log("Had issues ".concat(n,"ing to server"),e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),de.apply(this,arguments)}var fe={query:me,getById:he,remove:be,save:je,getEmpty:Ue};function me(){return ge.apply(this,arguments)}function ge(){return ge=Object(ie["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n="",t&&(n=ve(t)),e.abrupt("return",le.get("toy/".concat(n)));case 4:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}function ve(e){var t="?";return e.sortBy&&(t+="_sort=".concat(e.sortBy,"&")),e.inStock&&(t+="inStock=".concat(e.inStock,"&")),e.type&&(t+="type=".concat(e.type)),t}function he(e){return ye.apply(this,arguments)}function ye(){return ye=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",le.get("toy/".concat(t)));case 1:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}function be(e){return we.apply(this,arguments)}function we(){return we=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",le.delete("toy/".concat(t)));case 1:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function je(e){var t=e._id?xe(e):_e(e);return t}function _e(e){return ke.apply(this,arguments)}function ke(){return ke=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",le.post("toy/",t));case 1:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function xe(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(ie["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",le.put("toy/".concat(t._id),t));case 1:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}function Ue(){return{name:"",price:0,type:"",inStock:!1}}var Re,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.reviews?n("ul",{staticClass:"review-list"},e._l(e.reviews,(function(t){return n("review-preview",{key:t._id,attrs:{review:t,isUserShowen:e.isUserShowen,user:e.user}})})),1):e._e()},$e=[],Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",{staticClass:"review-preview flex align-center"},[e.user.isAdmin||e.user?n("el-button",{staticClass:"review-btn",on:{click:function(t){return e.deleteReview()}}},[e._v("X")]):e._e(),e.review?n("li",{staticClass:"flex"},[n("star-rating",{staticClass:"star-rating",attrs:{"read-only":"",increment:.5,"max-rating":5,"inactive-color":"white","active-color":"gold","star-size":15,"border-width":1,"border-color":"#999"},model:{value:e.review.rating,callback:function(t){e.$set(e.review,"rating",t)},expression:"review.rating"}}),n("span",[e._v("Toy: "+e._s(e.review.aboutToy.name))]),e.isUserShowen?n("span",[e._v("By: "+e._s(e.review.byUser.username))]):e._e(),n("span",[e._v("Content: "+e._s(e.review.content))]),n("small",[e._v(e._s(e.dateForDisplay))])],1):e._e()],1):e._e()},Te=[],Pe={props:{review:Object,isUserShowen:Boolean,user:Object},methods:{deleteReview:function(){this.$store.dispatch({type:"removeReview",reviewId:this.review._id})}},computed:{dateForDisplay:function(){return moment(this.review.createdAt).format("MMM Do YY")}},components:{StarRating:M.a}},Be=Pe,Ee=Object(d["a"])(Be,Oe,Te,!1,null,null,null),Ie=Ee.exports,Ae={components:{reviewPreview:Ie},props:{reviews:Array,isUserShowen:Boolean,user:Object}},ze=Ae,Me=Object(d["a"])(ze,Se,$e,!1,null,null,null),Le=Me.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",{staticClass:"chat-app"},[n("h4",[e._v("Let's talk about "+e._s(e.toyName))]),e.typing?n("span",[e._v(e._s(e.currUser)+" is typingâ¦")]):e._e(),n("ul",{ref:"msgList",staticClass:"msgs clean-list"},e._l(e.msgs,(function(t,r){return n("li",{key:r,class:e.getClassName(t.from)},[n("span",[n("strong",[e._v(e._s(t.from)+": ")])]),n("span",[e._v(e._s(t.txt))])])})),0),n("form",{staticClass:"chat-controls flex justify-center",on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.msg.txt,expression:"msg.txt"}],attrs:{type:"text"},domProps:{value:e.msg.txt},on:{keydown:e.handleTypeEv,input:function(t){t.target.composing||e.$set(e.msg,"txt",t.target.value)}}}),n("button",{attrs:{type:"submit"}},[e._v("Send")])])]):e._e()},De=[],Fe=n("8055"),He=n.n(Fe),qe="/",Je={setup:Ve,terminate:Ge,on:Ye,off:We,emit:Ke};function Ve(){Re=He()(qe)}function Ge(){Re=null}function Ye(e,t){Re.on(e,t)}function We(e,t){Re.off(e,t)}function Ke(e,t){Re.emit(e,t)}var Xe={props:{topic:String,user:String,toyName:String},data:function(){return{msg:{from:this.user,txt:""},msgs:[],typing:!1,currUser:""}},destroyed:function(){Je.off("chat addMsg",this.addMsg),Je.terminate()},methods:{addMsg:function(e){this.msgs.push(e),this.placeScrollBottom()},placeScrollBottom:function(){var e=this.$refs.msgList;e.scrollTop=e.scrollHeight-e.clientHeight},sendMsg:function(){console.log("Sending",this.msg),Je.emit("chat newMsg",this.msg),this.msg={from:this.user,txt:""}},handleTypeEv:function(){Je.emit("user typing",this.user)},getClassName:function(e){return this.user===e?"msg-preview self":"msg-preview"}},mounted:function(){this.placeScrollBottom()},created:function(){var e=this;Je.setup(),Je.emit("chat topic",this.topic),Je.on("chat addMsg",this.addMsg),Je.on("user typing",(function(t){e.currUser=t,t!==e.user&&(e.typing=!0,setTimeout((function(){e.typing=!1}),2e3))})),Je.on("msg history",(function(t){e.msgs=t}))}},Ze=Xe,Qe=Object(d["a"])(Ze,Ne,De,!1,null,null,null),et=Qe.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShowen?n("section",{staticClass:"pop-up",attrs:{tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closePopUp(t)}}},[n("div",{staticClass:"pop-up-container flex space-between column"},[n("button",{staticClass:"cls-btn",on:{click:e.closePopUp}},[e._v("X")]),e._t("default")],2)]):e._e()},nt=[],rt={props:{isShowen:Boolean,closePopUp:Function}},st=rt,it=Object(d["a"])(st,tt,nt,!1,null,null,null),ot=it.exports,at={data:function(){return{review:null,toy:null,isAddReviewShowen:!0}},computed:{imgSrc:function(){return this.toy.imgUrl?this.toy.imgUrl:"https://www.carrefourbahrain.com/sites/default/files/7.jpg"},reviews:function(){return this.$store.getters.reviews},dateForDisplay:function(){return moment(this.review.createdAt).format("MMM Do YY")},user:function(){return this.$store.getters.loggedinUser},isPopUpShowen:function(){return this.$store.getters.isPopUpShowen}},methods:{togglePopUp:function(){this.$store.dispatch({type:"togglePopUp"})},goBack:function(){this.$router.push("/")},setRating:function(e){this.review.rating=e},addReview:function(){this.user&&(this.$store.dispatch({type:"addReview",review:this.review}),this.isAddReviewShowen=!1)},setReview:function(){this.review={aboutToy:{toyId:this.toy._id,name:this.toy.name},content:"",rating:null,createdAt:Date.now()}}},created:function(){var e=this;return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,fe.getById(n);case 3:r=t.sent,e.toy=r,e.setReview(),e.$store.dispatch({type:"loadReviews",filterBy:{toyId:e.toy._id}});case 7:case"end":return t.stop()}}),t)})))()},components:{StarRating:M.a,reviewList:Le,popUp:ot,chatApp:et}},ct=at,ut=Object(d["a"])(ct,re,se,!1,null,null,null),lt=ut.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("section",{staticClass:"user-details container pages"},[n("h2",[e._v("My reviews")]),n("review-list",{attrs:{isUserShowen:!1,reviews:e.reviews,user:e.user}})],1):e._e()},dt=[],ft={login:yt,logout:_t,signup:wt,getUsers:mt,getById:gt,remove:vt,update:ht};function mt(){return le.get("user")}function gt(e){return le.get("user/".concat(e))}function vt(e){return le.delete("user/".concat(e))}function ht(e){return le.put("user/".concat(e._id),e)}function yt(e){return bt.apply(this,arguments)}function bt(){return bt=Object(ie["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.post("auth/login",t);case 2:return n=e.sent,console.log("user:",n),e.abrupt("return",xt(n));case 5:case"end":return e.stop()}}),e)}))),bt.apply(this,arguments)}function wt(e){return jt.apply(this,arguments)}function jt(){return jt=Object(ie["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("userCred:",t),e.next=3,le.post("auth/signup",t);case 3:return n=e.sent,console.log("user:",n),e.abrupt("return",xt(n));case 6:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function _t(){return kt.apply(this,arguments)}function kt(){return kt=Object(ie["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.post("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function xt(e){return console.log("user in _handleLogin:",e),sessionStorage.setItem("user",JSON.stringify(e)),e}var Ct={data:function(){return{user:null}},computed:{reviews:function(){return this.$store.getters.reviews}},created:function(){var e=this;return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,t.next=3,ft.getById(n);case 3:r=t.sent,e.user=r,console.log("this.user:",e.user),e.$store.dispatch({type:"loadReviews",filterBy:{byUser:e.user._id}});case 7:case"end":return t.stop()}}),t)})))()},components:{reviewList:Le}},Ut=Ct,Rt=Object(d["a"])(Ut,pt,dt,!1,null,null,null),St=Rt.exports,$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toy?n("section",{staticClass:"toy-edit pages"},[n("form",{staticClass:"flex column justify-center align-center"},[n("h2",{staticClass:"edit-title"},[e._v(e._s(e.title))]),e.toy.imgUrl?n("img",{staticClass:"toy-img",attrs:{src:e.toy.imgUrl,alt:""}}):e._e(),e.isLoading?n("img",{staticClass:"loader",attrs:{src:"https://i.gifer.com/4V0b.gif",alt:""}}):[e._m(0),n("input",{staticClass:"upload-input",attrs:{type:"file",name:"img-uploader",id:"imgUploader"},on:{change:e.onUploadImg}})],n("h3",[e._v("Name")]),n("ValidationProvider",{attrs:{name:"toy.name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return n("div",{staticClass:"flex column align-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.toy.name,expression:"toy.name"}],domProps:{value:e.toy.name},on:{input:function(t){t.target.composing||e.$set(e.toy,"name",t.target.value)}}}),n("p",{staticClass:"error-msg"},[e._v(e._s(r[0]))])])}}],null,!1,2298726268)}),n("h3",[e._v("Type")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.toy.type,expression:"toy.type"}],staticClass:"action",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.toy,"type",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"Funny"}},[e._v("Funny")]),n("option",{attrs:{value:"Adult"}},[e._v("Adult")]),n("option",{attrs:{value:"Educational"}},[e._v("Educational")])]),n("h3",[e._v("Price")]),n("ValidationProvider",{attrs:{name:"toy.price",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return n("div",{staticClass:"flex column align-center"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.toy.price,expression:"toy.price",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.toy.price},on:{input:function(t){t.target.composing||e.$set(e.toy,"price",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("p",{staticClass:"error-msg"},[e._v(e._s(r[0]))])])}}],null,!1,2595732986)}),n("label",{staticClass:"checkbox action"},[e._v("In stock? "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.toy.inStock,expression:"toy.inStock"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.toy.inStock)?e._i(e.toy.inStock,null)>-1:e.toy.inStock},on:{change:function(t){var n=e.toy.inStock,r=t.target,s=!!r.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);r.checked?o<0&&e.$set(e.toy,"inStock",n.concat([i])):o>-1&&e.$set(e.toy,"inStock",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.toy,"inStock",s)}}})]),n("div",{staticClass:"edit-btns"},[n("el-button",{attrs:{type:"button"},on:{click:e.goBack}},[e._v("Back")]),n("el-button",{on:{click:function(t){return t.preventDefault(),e.saveToy(t)}}},[e._v("Save")])],1)],2)]):e._e()},Ot=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"imgUploader"}},[n("img",{staticClass:"upload-img",attrs:{src:"https://lh3.googleusercontent.com/proxy/ybV5upOkFlWYVsEN_aWw4UmnHgjOlEG9kzWbDfedBxVYU_jO6UK1bNgdzCGO1FRTT0oCoDPbtweZrB-Qc-dIopuMGygTvvhWdoJznm-RN6g9O_wF-5EuVg4Rr1o",alt:""}})])}],Tt=n("5530"),Pt=function(){var e=Object(ie["a"])(regeneratorRuntime.mark((function e(t){var n,r,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="casep_pre",r="yuvalbeiton",s="https://api.cloudinary.com/v1_1/".concat(r,"/image/upload"),i=new FormData,i.append("file",t.target.files[0]),i.append("upload_preset",n),e.prev=6,e.next=9,ae.a.post(s,i);case 9:return o=e.sent,e.abrupt("return",o.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),Bt=n("7bb1"),Et=n("4c93");Object(Bt["b"])("required",Object(Tt["a"])(Object(Tt["a"])({},Et["a"]),{},{message:"This field is required"}));var It={data:function(){return{isEditing:!1,toy:null,isLoading:!1}},computed:{title:function(){return this.isEditing?"Edit toy ".concat(this.toy._id):"Add a toy"}},methods:{goBack:function(){this.$router.push("/")},saveToy:function(){if(this.isEditing||this.toy.name&&this.toy.type&&this.toy.price){var e=this.isEditing?"editToy":"addToy";this.$store.dispatch({type:e,toy:this.toy}),this.goBack()}else alert("All field are required")},onUploadImg:function(e){var t=this;return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isLoading=!0,n.next=3,Pt(e);case 3:r=n.sent,t.toy.imgUrl=r.url,t.isLoading=!1;case 6:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;if(this.$route.params.id){var t=this.$route.params.id;fe.getById(t).then((function(t){e.isEditing=!0,e.toy=t}))}else this.toy=fe.getEmpty(),this.isEditing=!1},components:{ValidationProvider:Bt["a"]}},At=It,zt=(n("fdd7"),Object(d["a"])(At,$t,Ot,!1,null,null,null)),Mt=zt.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login pages"},[n("div",{staticClass:"login-subtitle"},[e._v(e._s(e.subtitle)+" "),n("span",{staticClass:"btn-content",on:{click:function(t){return t.preventDefault(),e.toggleIsLogin(t)}}},[e._v(e._s(e.subtitleBtn))])]),e.isLogin?n("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin(t)}}},[n("el-input",{attrs:{type:"text",placeholder:"Email"},model:{value:e.loginCred.email,callback:function(t){e.$set(e.loginCred,"email",t)},expression:"loginCred.email"}}),n("br"),n("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.loginCred.password,callback:function(t){e.$set(e.loginCred,"password",t)},expression:"loginCred.password"}}),n("br"),n("el-button",{on:{click:e.doLogin}},[e._v("Login")])],1):n("form",{on:{submit:function(t){return t.preventDefault(),e.doSignup(t)}}},[n("el-input",{attrs:{type:"text",placeholder:"Email"},model:{value:e.signupCred.email,callback:function(t){e.$set(e.signupCred,"email",t)},expression:"signupCred.email"}}),n("br"),n("el-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.signupCred.password,callback:function(t){e.$set(e.signupCred,"password",t)},expression:"signupCred.password"}}),n("br"),n("el-input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.signupCred.username,callback:function(t){e.$set(e.signupCred,"username",t)},expression:"signupCred.username"}}),n("br"),n("el-button",{on:{click:e.doSignup}},[e._v("Signup")])],1)])},Nt=[],Dt={name:"test",data:function(){return{isLogin:!0,loginCred:{},signupCred:{},msg:"",userToEdit:{}}},computed:{subtitle:function(){return this.isLogin?"Don't have a user yet?":"Already have a user?"},subtitleBtn:function(){return this.isLogin?"Signup":"Login"},users:function(){return this.$store.getters.users},loggedinUser:function(){return this.$store.getters.loggedinUser}},created:function(){console.log("this.loggedinUser",this.loggedinUser)},methods:{toggleIsLogin:function(){this.isLogin=!this.isLogin},doLogin:function(){var e=this;return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.loginCred,console.log("cred:",n),n.email&&n.password){t.next=4;break}return t.abrupt("return",e.msg="Please enter user/password");case 4:return t.next=6,e.$store.dispatch({type:"login",userCred:n});case 6:e.isLogin=!1,e.loginCred={},e.$router.push("/");case 9:case"end":return t.stop()}}),t)})))()},doLogout:function(){this.$router.push("/"),this.$store.dispatch({type:"logout"})},doSignup:function(){var e=this.signupCred;if(!e.email||!e.password||!e.username)return this.msg="Please fill up the form";this.$store.dispatch({type:"signup",userCred:e}),this.$router.push("/")}},watch:{loggedinUser:function(){this.userToEdit=Object(Tt["a"])({},this.loggedinUser)}}},Ft=Dt,Ht=Object(d["a"])(Ft,Lt,Nt,!1,null,null,null),qt=Ht.exports,Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"reviews-page pages container"},[n("h2",[e._v("All reviews")]),n("review-list",{attrs:{user:e.user,isUserShowen:!0,reviews:e.reviews}})],1)},Vt=[],Gt={computed:{reviews:function(){return this.$store.getters.reviews},user:function(){return this.$store.getters.loggedinUser}},created:function(){this.$store.dispatch({type:"loadReviews"})},components:{reviewList:Le}},Yt=Gt,Wt=Object(d["a"])(Yt,Jt,Vt,!1,null,null,null),Kt=Wt.exports;i["default"].use(b["a"]);var Xt=[{path:"/",name:"toyApp",component:ne},{path:"/login",name:"login",component:qt},{path:"/reviews",name:"reviews",component:Kt},{path:"/admin",name:"Admin",component:O},{path:"/details/:id",component:lt},{path:"/userdetails/:id",component:St},{path:"/edit/:id?",component:Mt}],Zt=new b["a"]({mode:"hash",base:"/",routes:Xt}),Qt=Zt,en=n("2f62"),tn=(n("c740"),n("a434"),{strict:!0,state:{toys:[],filterBy:null,types:["Adult","Funny","Educational"]},getters:{toys:function(e){return e.toys},types:function(e){return e.types},filterBy:function(e){return e.filterBy}},mutations:{setToys:function(e,t){var n=t.toys;e.toys=n},deleteToy:function(e,t){var n=t.toyId,r=e.toys.findIndex((function(e){return e._id===n}));e.toys.splice(r,1)},setTypes:function(e,t){var n=t.types;e.types=n},setFilterBy:function(e,t){var n=t.filterBy;e.filterBy=n},addToy:function(e,t){var n=t.toy;e.toys.unshift(n)},editToy:function(e,t){var n=t.toy,r=e.toys.findIndex((function(e){return n._id===e._id}));e.toys.splice(r,1,n)}},actions:{setFilterBy:function(e,t){var n=t.filterBy;e.commit({type:"setFilterBy",filterBy:n}),e.dispatch("loadToys")},loadToys:function(e){return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getters,r=e.commit,t.next=3,fe.query(n.filterBy);case 3:return s=t.sent,r({type:"setToys",toys:s}),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},deleteToy:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,s=t.toyId,n.next=4,fe.remove(s);case 4:return i=n.sent,r({type:"deleteToy",toyId:s}),n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))()},editToy:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,s=t.toy,console.log("toy from edit store:",s),n.next=5,fe.save(s);case 5:return i=n.sent,r({type:"editToy",toy:i}),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()},addToy:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,s=t.toy,n.next=4,fe.save(s);case 4:return i=n.sent,r({type:"addToy",toy:i}),n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))()}}}),nn=(n("4de4"),null);sessionStorage.user&&(nn=JSON.parse(sessionStorage.user));var rn={state:{loggedinUser:nn,users:[]},getters:{users:function(e){return e.users},loggedinUser:function(e){return e.loggedinUser}},mutations:{setUser:function(e,t){var n=t.user;e.loggedinUser=n,console.log("loggedinuser:",e.loggedinUser)},setUsers:function(e,t){var n=t.users;e.users=n},removeUser:function(e,t){var n=t.userId;e.users=e.users.filter((function(e){return e._id!==n}))}},actions:{login:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.userCred,console.log("userCred from store:",r),n.next=4,ft.login(r);case 4:return s=n.sent,e.commit({type:"setUser",user:s}),n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})))()},signup:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.userCred,console.log("here"),n.next=4,ft.signup(r);case 4:return s=n.sent,e.commit({type:"setUser",user:s}),n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(ie["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ft.logout();case 2:e.commit({type:"setUsers",users:[]}),e.commit({type:"setUser",user:null});case 4:case"end":return t.stop()}}),t)})))()},loadUsers:function(e){return Object(ie["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ft.getUsers();case 2:n=t.sent,e.commit({type:"setUsers",users:n});case 4:case"end":return t.stop()}}),t)})))()},removeUser:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.userId,n.next=3,ft.remove(r);case 3:e.commit({type:"removeUser",userId:r});case 4:case"end":return n.stop()}}),n)})))()},updateUser:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.user,n.next=3,ft.update(r);case 3:r=n.sent,e.commit({type:"setUser",user:r});case 5:case"end":return n.stop()}}),n)})))()}}},sn={add:cn,query:on,remove:an};function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";return e.toyId&&(t="?toyId=".concat(e.toyId)),e.byUser&&(t="?byUser=".concat(e.byUser)),console.log("path:","review/".concat(t)),le.get("review/".concat(t))}function an(e){return le.delete("review/".concat(e))}function cn(e){return le.post("review",e)}var un={state:{reviews:[]},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var n=t.reviews;e.reviews=n},addReview:function(e,t){var n=t.review;e.reviews.push(n)},removeReview:function(e,t){var n=t.reviewId;e.reviews=e.reviews.filter((function(e){return e._id!==n}))}},actions:{addReview:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.review,n.next=3,sn.add(r);case 3:return r=n.sent,e.commit({type:"addReview",review:r}),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},loadReviews:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.filterBy,console.log("filterBy in store:",r),n.next=4,sn.query(r);case 4:s=n.sent,e.commit({type:"setReviews",reviews:s});case 6:case"end":return n.stop()}}),n)})))()},removeReview:function(e,t){return Object(ie["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.reviewId,console.log("reviewId from store:",r),n.next=4,sn.remove(r);case 4:e.commit({type:"removeReview",reviewId:r});case 5:case"end":return n.stop()}}),n)})))()}}};i["default"].use(en["a"]);var ln=new en["a"].Store({strict:!0,state:{isPopUpShowen:!1},getters:{isPopUpShowen:function(e){return e.isPopUpShowen}},mutations:{togglePopUp:function(e){e.isPopUpShowen=!e.isPopUpShowen}},actions:{togglePopUp:function(e){var t=e.commit;t({type:"togglePopUp"})}},modules:{toyStore:tn,userStore:rn,reviewStore:un}}),pn=n("5c96"),dn=n.n(pn),fn=(n("0fae"),n("755e"));n("3c61");i["default"].use(dn.a),i["default"].use(fn,{load:{key:"AIzaSyCmhCBEHJkdIG3m11Ua7ZsKbz3u9nMJBuI",libraries:"places"}}),i["default"].config.productionTip=!1,new i["default"]({router:Qt,store:ln,render:function(e){return e(y)}}).$mount("#app")},"6a66":function(e,t,n){},fdd7:function(e,t,n){"use strict";n("6a66")}});
//# sourceMappingURL=app.87f572d4.js.map